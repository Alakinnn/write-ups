The attack first start with a Nmap scan to check for what services are running on the system
![[Pasted image 20250126163340.png]]

There were two significant services that NSE gave results on, first is the NFS and second is RDP

![[Pasted image 20250126163412.png]]

![[Pasted image 20250126163425.png]]

Since the requirements was to look for the password of user HTB, I checked on which mount is available.

![[Pasted image 20250126163515.png]]


I tried to access the mount but somehow got denied
![[Pasted image 20250126163606.png]]

So I thought NFS was not the attack vector I am looking for.

I then shift my attention to the RDP. From the [[https://book.hacktricks.wiki/en/network-services-pentesting/pentesting-rdp.html]] wiki, I tried to perform a password bruteforcing using hydra.
![[Pasted image 20250126163733.png]]

![[Pasted image 20250126163805.png]]

Apparently I wasted an hour for nothing. With 2 probable attack vectors being inaccessible for the time being, I conclude that my approach is flawed.

When I check the accessibility of the mount, I see that it differs from my pwnbox's id (Note that I got two folders of two different attempts, serving the same files)

![[Pasted image 20250126163939.png]]

I tried to see if root command works here
![[Pasted image 20250126164004.png]]

I randomly `sudo nano` one of the file and i see that it's empty, so I try to search for a non-empty txt.
![[Pasted image 20250126164046.png]]

The file happened to store a credential of user 'alex'
![[Pasted image 20250126164115.png]]
there's also a domain I tried to access but bear no result
![[Pasted image 20250126164132.png]]

I tried to use the same credential to access the RDP and it works
![[Pasted image 20250126164215.png]]

There was a SQL Studio Management on the windows GUI, but no matter what credentials I tried it won't connect.

I tried to look for folders in the system and I came across this funny looking file.
![[Pasted image 20250126164333.png]]

Turns out it contains the credentials of a username called 'sa'.

I used that credentials to access the SQL again but led to failure. The word 'sa' strike me with 'SystemAdministrator' so I tried to go into the admin folder to see if there's anything interesting and there's none.

![[Pasted image 20250126164452.png]]

I tried to login into RDP, again. But this time with the sa user.

![[Pasted image 20250126164519.png]]

When I tried to look for if SQL Studio actually saves the credentials somewhere on the machine, I came across just that. Note: This file is in the AppData which I check somewhere on stackoverflow

![[Pasted image 20250126164719.png]]
It's actually the wrong file. Btw.
![[Pasted image 20250126164755.png]]

But I came across this thread, saying that the saved credentials is somewhere on the machine. Which means that the Admin has login and saved the password somehow
![[Pasted image 20250126164911.png]]
So after I ran the SQL Studio (which is not on the Desktop, I has to go into the install location), and login, it works.

After searching for some table, whichever has credentials-related name, I click on and the result is in front of me.
![[Pasted image 20250126165020.png]]
