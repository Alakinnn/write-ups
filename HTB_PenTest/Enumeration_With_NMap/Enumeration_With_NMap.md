
Write Ups: [[Write_Ups]]
## Introduction
Enumeration is the most crucial part aka the "Reconnaissance" phase before an attack.

The sole reason for its importance is not how many services we discover on the remote target, but rather our understandings of the found services, how they communicate with other services.

Imagine enumeration is a two-way scaling, scale on X-Axis is how much information of the target we have on hand, and Y-Axis is how deep we understand the services/protocols.

## What to do
When we enumerate, we look for two things:
1. Misconfigurations in the services/applications
2. Bad security practices, this includes but not limited to:
	1. Only relies on firewall
	2. Group Policy Objects
	3. No-updates

## Intro to NMap
NMap is a network analysis tool, used in penetration testing for the following purposes:
1. Host discovery
2. Port scanning
3. Services enum and detection
4. OS detection
5. Scriptable interaction with target

One of the most popular NMap scanning is '-sS' flag, meaning sending a SYN packet to target. If target returns a SYN-ACK, it means the port is opened.


## Port Scanning
When scanning ports, there are 5 states:
1. Open
2. Closed (When port return a RST)
3. Filtered (No response or there is an error code)
4. Unfiltered (Only occur during TCP-ACK scan and means that the port is inaccessible but it cant determine open or closed)
5. open|filtered (No response, as there might be a firewall)
6. close|filtered (Only in 'IP ID idle' scan and indicates that it was possible to determine closed/filtered)

## TCP Scanning
There are -sT scanning, technically establishing a 3-way handshake. -sS means that we onyl send an SYN packet. The latter is more stealthy but can be detected by modern IDS/IPS systems

## UDP Scanning
There is -sU for UDP scanning. It is similar with TCP with flags such as -n to disable DNS resolution, --disable-arp-ping, and -Pn to disable ICMP. 
UDP is much slower since it is stateless.

## Saving as Files
-oA (saved as 3 different formats), -oX, -oG, -oN
```shell-session
xsltproc target.xml -o target.html
```
the above line is converting an xml to html

## NSE - Nmap Scripting Engine
technically this is the default scripts available in Nmap, which can be handy for specific services. 
```shell-session
alakin2504@htb[/htb]$ sudo nmap 10.129.2.28 -p 25 --script banner,smtp-commands

Starting Nmap 7.80 ( https://nmap.org ) at 2020-06-16 23:21 CEST
Nmap scan report for 10.129.2.28
Host is up (0.050s latency).

PORT   STATE SERVICE
25/tcp open  smtp
|_banner: 220 inlane ESMTP Postfix (Ubuntu)
|_smtp-commands: inlane, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8,
MAC Address: DE:AD:00:00:BE:EF (Intel Corporate)
```

## Bypassing IDP/IPS
[[Bypassing_IDS_IPS]]
